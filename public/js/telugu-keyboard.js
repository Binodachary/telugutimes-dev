!function(){var t={};t.util={mobile:/Android|webOS|iPhone|iPad|iPod|IEMobile|Opera Mini/i.test(navigator.userAgent),opera:!!window.opr&&!!opr.addons||!!window.opera||navigator.userAgent.indexOf(" OPR/")>=0,mozilla:"undefined"!=typeof InstallTrigger,windowWidth:function(){var t=window.document.documentElement.clientWidth,e=window.document.body;return"CSS1Compat"===window.document.compatMode&&t||e&&e.clientWidth||t},code:function(t){if(!t)t=window.event;return null!=t.code&&null!=t.key?t.code:"Unidentified"},keyCode:function(t){if(!t)t=window.event;var e=t.keyCode;if(this.mozilla)switch(e){case 59:e=186;break;case 107:e=187;break;case 109:e=189;break;case 61:e=187;break;case 173:e=189}if(this.opera)switch(e){case 59:e=186;break;case 61:e=187;break;case 109:e=189}return 18==e&&t.location&&2==t.location&&(e=255),e},preventDefault:function(t){if(!t)t=window.event;t.preventDefault?t.preventDefault():t.returnValue=!1},srcId:function(t,e,n){if(!t)t=window.event;var a;for(t.target?a=t.target:t.srcElement&&(a=t.srcElement),3==a.nodeType&&(a=target.parentNode);a.tagName.toLowerCase()!=n;)if((a=a.parentNode)==e||"body"==a.tagName.toLowerCase())return null;return a.id},insertAtCaret:function(t,e){if(t.readOnly)t.value+=e;else{var n=this.getSelectionStart(t),a=this.getSelectionEnd(t),o=t.value.length;t.value=t.value.substring(0,n)+e+t.value.substring(a,o),this.setCaretPosition(t,n+e.length,0)}},deleteAtCaret:function(t,e,n){if(t.readOnly){var a=t.value;return a.length<e?(t.value="",a):(t.value=a.substring(0,a.length-e),a.substr(a.length-e))}var o=this.getSelectionStart(t),i=this.getSelectionEnd(t),s=t.value.length;e>o&&(e=o),i+n>s&&(n=s-i);var r=t.value.substring(o-e,i+n);return t.value=t.value.substring(0,o-e)+t.value.substring(i+n),this.setCaretPosition(t,o-e,0),r},getSelectionStart:function(t){if(t.focus(),void 0!==t.selectionStart)return t.selectionStart;if(document.selection){var e=document.selection.createRange();if(null==e)return 0;var n=t.createTextRange(),a=n.duplicate();return n.moveToBookmark(e.getBookmark()),a.setEndPoint("EndToStart",n),a.text.length}return 0},getSelectionEnd:function(t){if(t.focus(),void 0!==t.selectionEnd)return t.selectionEnd;if(document.selection){var e=document.selection.createRange();if(null==e)return 0;var n=t.createTextRange(),a=n.duplicate();return n.moveToBookmark(e.getBookmark()),a.setEndPoint("EndToStart",n),a.text.length+e.text.length}return t.value.length},setCaretPosition:function(t,e,n){var a=t.value.length;if(e>a&&(e=a),e+n>a&&(n=a-n),t.focus(),t.setSelectionRange)t.setSelectionRange(e,e+n);else if(t.createTextRange){var o=t.createTextRange();o.collapse(!0),o.moveEnd("character",e+n),o.moveStart("character",e),o.select()}t.focus()},selectAll:function(t){this.setCaretPosition(t,0,t.value.length)},fromCharCodeS:function(){for(var t,e,n,a=arguments.length,o="",i=0;i<a;i++)(n=arguments[i])<1114112&&65535<n?(t=Math.floor((n-65536)/1024)+55296,e=(n-65536)%1024+56320,o+=String.fromCharCode(t,e)):n<65536&&(o+=String.fromCharCode(n));return o}},t.layout=function(){this.keys=[],this.deadkeys=[],this.dir="ltr",this.name="US",this.lang="en"},t.layout.prototype.loadDefault=function(){this.keys=[{i:"k0",c:"0",n:"`",s:"~"},{i:"k1",c:"0",n:"1",s:"!"},{i:"k2",c:"0",n:"2",s:"@"},{i:"k3",c:"0",n:"3",s:"#"},{i:"k4",c:"0",n:"4",s:"$"},{i:"k5",c:"0",n:"5",s:"%"},{i:"k6",c:"0",n:"6",s:"^"},{i:"k7",c:"0",n:"7",s:"&"},{i:"k8",c:"0",n:"8",s:"*"},{i:"k9",c:"0",n:"9",s:"("},{i:"k10",c:"0",n:"0",s:")"},{i:"k11",c:"0",n:"-",s:"_"},{i:"k12",c:"0",n:"=",s:"+"},{i:"k13",c:"1",n:"q",s:"Q"},{i:"k14",c:"1",n:"w",s:"W"},{i:"k15",c:"1",n:"e",s:"E"},{i:"k16",c:"1",n:"r",s:"R"},{i:"k17",c:"1",n:"t",s:"T"},{i:"k18",c:"1",n:"y",s:"Y"},{i:"k19",c:"1",n:"u",s:"U"},{i:"k20",c:"1",n:"i",s:"I"},{i:"k21",c:"1",n:"o",s:"O"},{i:"k22",c:"1",n:"p",s:"P"},{i:"k23",c:"0",n:"[",s:"{"},{i:"k24",c:"0",n:"]",s:"}"},{i:"k25",c:"0",n:"\\",s:"|"},{i:"k26",c:"1",n:"a",s:"A"},{i:"k27",c:"1",n:"s",s:"S"},{i:"k28",c:"1",n:"d",s:"D"},{i:"k29",c:"1",n:"f",s:"F"},{i:"k30",c:"1",n:"g",s:"G"},{i:"k31",c:"1",n:"h",s:"H"},{i:"k32",c:"1",n:"j",s:"J"},{i:"k33",c:"1",n:"k",s:"K"},{i:"k34",c:"1",n:"l",s:"L"},{i:"k35",c:"0",n:";",s:":"},{i:"k36",c:"0",n:"'",s:'"'},{i:"k37",c:"1",n:"z",s:"Z"},{i:"k38",c:"1",n:"x",s:"X"},{i:"k39",c:"1",n:"c",s:"C"},{i:"k40",c:"1",n:"v",s:"V"},{i:"k41",c:"1",n:"b",s:"B"},{i:"k42",c:"1",n:"n",s:"N"},{i:"k43",c:"1",n:"m",s:"M"},{i:"k44",c:"0",n:",",s:"<"},{i:"k45",c:"0",n:".",s:">"},{i:"k46",c:"0",n:"/",s:"?"},{i:"k47",c:"0",n:"\\",s:"|"}],this.dir="ltr",this.name="US",this.lang="en"},t.layout.prototype.load=function(t){this.keys=t.keys,this.deadkeys=t.deadkeys,this.dir=t.dir,this.name=t.name,this.lang=t.lang?t.lang:"en"},t.layout.parser={keys:{192:"Backquote",49:"Digit1",50:"Digit2",51:"Digit3",52:"Digit4",53:"Digit5",54:"Digit6",55:"Digit7",56:"Digit8",57:"Digit9",48:"Digit0",189:"Minus",187:"Equal",81:"KeyQ",87:"KeyW",69:"KeyE",82:"KeyR",84:"KeyT",89:"KeyY",85:"KeyU",73:"KeyI",79:"KeyO",80:"KeyP",219:"BracketLeft",221:"BracketRight",220:"Backslash",65:"KeyA",83:"KeyS",68:"KeyD",70:"KeyF",71:"KeyG",72:"KeyH",74:"KeyJ",75:"KeyK",76:"KeyL",186:"Semicolon",222:"Quote",90:"KeyZ",88:"KeyX",67:"KeyC",86:"KeyV",66:"KeyB",78:"KeyN",77:"KeyM",188:"Comma",190:"Period",191:"Slash",17:"ControlLeft",18:"AltLeft",16:"ShiftLeft",32:"Space",27:"Escape",20:"CapsLock",13:"Enter",255:"AltRight"},codes:{Backquote:0,Digit1:1,Digit2:2,Digit3:3,Digit4:4,Digit5:5,Digit6:6,Digit7:7,Digit8:8,Digit9:9,Digit0:10,Minus:11,Equal:12,KeyQ:13,KeyW:14,KeyE:15,KeyR:16,KeyT:17,KeyY:18,KeyU:19,KeyI:20,KeyO:21,KeyP:22,BracketLeft:23,BracketRight:24,Backslash:25,KeyA:26,KeyS:27,KeyD:28,KeyF:29,KeyG:30,KeyH:31,KeyJ:32,KeyK:33,KeyL:34,Semicolon:35,Quote:36,KeyZ:37,KeyX:38,KeyC:39,KeyV:40,KeyB:41,KeyN:42,KeyM:43,Comma:44,Period:45,Slash:46,IntlBackslash:47},getKeyLegend:function(t,e){for(var n=t.length,a=0;a<n;a++)if(t[a].i==e)return t[a].n?t[a].n:"";return 0},getKey:function(t,e){for(var n=t.length,a=0;a<n;a++)if(t[a].i==e)return t[a];return null},isDeadkey:function(t,e){if(!t)return!1;for(var n=t.length,a=0;a<n;a++)if(t[a].k==e)return!0;return!1},getMappedValue:function(t,e,n){if(!t)return"";for(var a=t.length,o=0;o<a;o++)if(t[o].k==n&&t[o].b==e)return t[o].c;return""},getState:function(t,e,n,a,o,i){var s="n";return e||n||!t?e||!n||t?!e&&n&&t?s="s":!e||n||t?e&&!n&&t?s="t":e&&n&&!t?s="s":e&&n&&t&&(s="f"):s="n":s="s":s="n",a&&("1"==o?"n"==s?s="s":"s"==s&&(s="n"):"SGCap"==o&&("n"==s?s="y":"s"==s&&(s="z"))),i&&("n"==s?s="t":"s"==s&&(s="f")),s}},t.keyboard=function(e,n){this.defaultLayout=new t.layout,this.defaultLayout.loadDefault(),this.virtualLayout=new t.layout,this.virtualLayout.loadDefault(),this.currentLayout=this.virtualLayout,this.shift=!1,this.shiftOn=!1,this.caps=!1,this.capsOn=!1,this.alt=!1,this.altGr=!1,this.altGrOn=!1,this.ctrl=!1,this.altCtrlOn=!1,this.fontSize=18,this.counter=0,this.interval=0,this.prev="",this.emoji=!1,this.emojiStartingCodePoint=128512,this.emojiCurrentCodePoint=128512,this.cancelkeypress=!1,this.customOnBackspace=function(t){},this.customOnEnter=function(){},this.customOnSpace=function(){return!1},this.customOnKey=function(t){return!1},this.customOnEsc=function(){},this.customDrawKeyboard=function(t){return t},this.textbox=document.getElementById(n),this.textbox.style.fontSize="18px",t.util.mobile&&(this.textbox.readOnly=!0);var a=['<div id="branah-keyboard">'];if(a.push('<div id="branah-keyboard-alpha">'),t.util.windowWidth()<640){for(var o=13;o<23;o++)a.push('<button id="branah-k',o,'" class="branah-key"></button>');for(o=26;o<35;o++)a.push('<button id="branah-k',o,'" class="branah-key"></button>');for(o=37;o<44;o++)a.push('<button id="branah-k',o,'" class="branah-key"></button>');a.push('<button id="branah-left-shift"><span>Shift</span></button>'),a.push('<button id="branah-caps-lock"><span>Caps</span></button>'),a.push('<button id="branah-escape" title="Turn on/off keyboard input conversion"><span>Esc</span></button>'),a.push('<button id="branah-space"><span>Space</span></button>'),a.push('<button id="branah-emoji" class="branah-key">😀</button>'),a.push('<button id="branah-enter" class="branah-enter"><span>Enter</span></button>'),a.push('<button id="branah-left-ctrl"><span>Ctrl+Alt</span></button>'),a.push('<button id="branah-left-alt" style="display:none"><span>Alt</span></button>'),a.push('<button id="branah-backspace"><span>Back</span></button>');for(o=0;o<13;o++)a.push('<button id="branah-k',o,'" class="branah-key"></button>');for(o=23;o<26;o++)a.push('<button id="branah-k',o,'" class="branah-key"></button>');for(o=35;o<37;o++)a.push('<button id="branah-k',o,'" class="branah-key"></button>');for(o=44;o<48;o++)a.push('<button id="branah-k',o,'" class="branah-key"></button>');a.push('<div class="branah-clear"></div>')}else{for(o=0;o<13;o++)a.push('<button id="branah-k',o,'" class="branah-key"></button>');a.push('<button id="branah-backspace"><span>Backspace</span></button>'),a.push('<div class="branah-clear"></div>'),a.push('<button id="branah-tab"><span>Tab</span></button>');for(o=13;o<25;o++)a.push('<button id="branah-k',o,'" class="branah-key"></button>');a.push('<button id="branah-k25"></button>'),a.push('<div class="branah-clear"></div>'),a.push('<button id="branah-caps-lock"><span>Caps Lock</span></button>');for(o=26;o<37;o++)a.push('<button id="branah-k',o,'" class="branah-key"></button>');a.push('<button id="branah-enter" class="branah-enter"><span>Enter</span></button>'),a.push('<div class="branah-clear"></div>'),a.push('<button id="branah-left-shift"><span>Shift</span></button>'),a.push('<button id="branah-k47" class="branah-key"></button>');for(o=37;o<47;o++)a.push('<button id="branah-k',o,'" class="branah-key"></button>');a.push('<button id="branah-right-shift"><span>Shift</span></button>'),a.push('<div class="branah-clear"></div>'),a.push('<button id="branah-left-ctrl"><span>Ctrl</span></button>'),a.push('<button id="branah"><span>Emoji</span></button>'),a.push('<button id="branah-left-alt"><span>Alt</span></button>'),a.push('<button id="branah-space"><span>Space</span></button>'),a.push('<button id="branah-right-alt"><span>AltGr</span></button>'),a.push('<button id="branah-escape" title="Turn on/off keyboard input conversion"><span>Esc</span></button>'),a.push('<button id="branah-right-ctrl"><span>Ctrl</span></button>'),a.push('<div class="branah-clear"></div>')}a.push("</div>"),a.push('<div id="branah-keyboard-emoji" style="display:none">'),a.push("</div>"),a.push("</div>"),document.getElementById(e).innerHTML=a.join(""),this.wireEvents(),this.drawKeyboard()},t.keyboard.prototype.loadDefaultLayout=function(t){this.defaultLayout.load(t),this.drawKeyboard()},t.keyboard.prototype.loadVirtualLayout=function(t){this.virtualLayout.load(t),this.drawKeyboard(),this.textbox.style.direction=this.attr("dir")},t.keyboard.prototype.switchLayout=function(){this.currentLayout=this.currentLayout===this.defaultLayout?this.virtualLayout:this.defaultLayout,this.reset(),this.drawKeyboard(),this.textbox.style.direction=this.attr("dir")},t.keyboard.prototype.getFontSize=function(){return this.fontSize},t.keyboard.prototype.setFontSize=function(t){this.fontSize=t,this.textbox.style.fontSize=this.fontSize+"px"},t.keyboard.prototype.onEsc=function(){this.switchLayout(),this.customOnEsc()},t.keyboard.prototype.onShift=function(){this.shift=!this.shift,this.drawKeyboard()},t.keyboard.prototype.onAlt=function(){this.alt=!this.alt,this.drawKeyboard()},t.keyboard.prototype.onAltGr=function(){this.altGr=!this.altGr,this.drawKeyboard()},t.keyboard.prototype.onCtrl=function(){this.ctrl=!this.ctrl,this.drawKeyboard()},t.keyboard.prototype.onCapsLock=function(){this.caps=!this.caps,this.drawKeyboard()},t.keyboard.prototype.onBackspace=function(){if(""!=this.prev)this.prev="",this.shift=!1,this.drawKeyboard();else{var e=t.util.deleteAtCaret(this.textbox,1,0);if(e.length>0){var n=e.charCodeAt(0);n<57344&&56319<n&&(e=t.util.deleteAtCaret(this.textbox,1,0)+e)}this.customOnBackspace(e)}},t.keyboard.prototype.onEnter=function(){t.util.insertAtCaret(this.textbox,"\n"),this.customOnEnter()},t.keyboard.prototype.onSpace=function(){this.customOnSpace()||t.util.insertAtCaret(this.textbox," ")},t.keyboard.prototype.onEmoji=function(){this.emoji=!this.emoji,this.emojiCurrentCodePoint=this.emojiStartingCodePoint,this.drawKeyboard()},t.keyboard.prototype.onEmojiScrollUp=function(){this.emojiCurrentCodePoint-=14,this.emojiCurrentCodePoint<0&&(this.emojiCurrentCodePoint=0),this.drawKeyboard()},t.keyboard.prototype.onEmojiScrollDown=function(){this.emojiCurrentCodePoint+=14,this.drawKeyboard()},t.keyboard.prototype.onEmojiKey=function(e){t.util.insertAtCaret(this.textbox,t.util.fromCharCodeS(this.emojiCurrentCodePoint+parseInt(e)-100))},t.keyboard.prototype.attr=function(t){return"dir"==t?this.currentLayout.dir:"lang"==t?this.currentLayout.lang:"name"==t?this.currentLayout.name:""},t.keyboard.prototype.reset=function(){this.shift=!1,this.caps=!1,this.alt=!1,this.altGr=!1,this.ctrl=!1,this.counter=0,this.interval=0,this.prev=""},t.keyboard.prototype.stopRepeat=function(){0!=this.interval&&(clearInterval(this.interval),this.counter=0,this.interval=0)},t.keyboard.prototype.onKey=function(e){var n=t.layout.parser.getKey(this.currentLayout.keys,e);if(n){var a=t.layout.parser.getState(this.ctrl,this.alt,this.shift,this.caps,n.c?n.c:"0",this.altGr),o=n[a]?n[a]:"";if(""!=this.prev){var i=t.layout.parser.getMappedValue(this.currentLayout.deadkeys,o,this.prev);""!=i&&t.util.insertAtCaret(this.textbox,i),this.prev=""}else t.layout.parser.isDeadkey(this.currentLayout.deadkeys,o)?this.prev=o:""!=o&&(this.customOnKey(o)||t.util.insertAtCaret(this.textbox,o))}},t.keyboard.prototype.getEmojiHTML=function(){var e=14;t.util.windowWidth()<640&&(e=6);for(var n=[],a=100;a<100+5*e;a++){n.push('<button id="branah-k',a,'" class="branah-key"><div style="font-size:',this.fontSize,'px;">',t.util.fromCharCodeS(this.emojiCurrentCodePoint+a-100),"</div></button>");var o=a-99;o==e?(n.push('<button id="branah-emoji-scrollup" class="branah-key"><div style="font-size:',this.fontSize,'px;">⏶</div></button>'),n.push('<div class="branah-clear"></div>')):o==2*e?(n.push('<button id="branah-emoji" class="branah-key"><span>abc</span></button>'),n.push('<div class="branah-clear"></div>')):o==3*e?(n.push('<button id="branah-emoji-backspace" class="branah-key"><div style="font-size:',this.fontSize,'px;">⌫</div></button>'),n.push('<div class="branah-clear"></div>')):o==4*e?(n.push('<button id="branah-emoji-enter" class="branah-key"><div style="font-size:',this.fontSize,'px;">↵</div></button>'),n.push('<div class="branah-clear"></div>')):o==5*e&&(n.push('<button id="branah-emoji-scrolldown" class="branah-key"><div style="font-size:',this.fontSize,'px;">⏷</div></button>'),n.push('<div class="branah-clear"></div>'))}return n.push('<div class="branah-clear"></div>'),n.join("")},t.keyboard.prototype.drawKeyboard=function(){if(this.emoji)return document.getElementById("branah-keyboard-emoji").innerHTML=this.getEmojiHTML(),document.getElementById("branah-keyboard-emoji").style.display="",void(document.getElementById("branah-keyboard-alpha").style.display="none");if(document.getElementById("branah-keyboard-emoji").style.display="none",document.getElementById("branah-keyboard-alpha").style.display="",this.currentLayout.keys){for(var e,n,a,o,i=this.currentLayout.keys.length,s=0;s<i;s++)if(n=this.currentLayout.keys[s],document.getElementById("branah-"+n.i)){var r=this.ctrl,c=this.alt,l=this.shift,u=this.caps,d=this.altGr;this.shiftOn&&(l=!0),this.capsOn&&(u=!0),this.altCtrlOn&&(r=!0,c=!0),this.altGrOn&&(d=!0),o=n[a=t.layout.parser.getState(r,c,l,u,n.c?n.c:"0",d)]?n[a]:"",""!=this.prev&&(o=t.layout.parser.getMappedValue(this.currentLayout.deadkeys,o,this.prev)),(e=[]).push('<div class="branah-label-reference">',t.layout.parser.getKeyLegend(this.defaultLayout.keys,n.i),"</div>"),l?(""==o&&(o="&nbsp;"),e.push('<div class="branah-label-shift" style="font-size:',this.fontSize,'px;">&nbsp;',o,"</div>")):(""==(o=this.customDrawKeyboard(o))&&(o="&nbsp;"),e.push('<div class="branah-label-natural" style="font-size:',this.fontSize,'px;">&nbsp;',o,"</div>")),document.getElementById("branah-"+n.i).innerHTML=e.join("")}var h=document.getElementById("branah-left-ctrl"),y=document.getElementById("branah-right-ctrl");h&&y&&(r?(h.className="branah-recessed"+(this.ctrl?"":"-hover"),y.className="branah-recessed"+(this.ctrl?"":"-hover")):(h.className="",y.className=""));var b=document.getElementById("branah-left-alt");b&&(b.className=c?"branah-recessed"+(this.alt?"":"-hover"):"");var k=document.getElementById("branah-right-alt");k&&(k.className=d?"branah-recessed"+(this.altGr?"":"-hover"):"");var p=document.getElementById("branah-left-shift"),f=document.getElementById("branah-right-shift");p&&f&&(l?(p.className="branah-recessed"+(this.shift?"":"-hover"),f.className="branah-recessed"+(this.shift?"":"-hover")):(p.className="",f.className=""));var m=document.getElementById("branah-caps-lock");m&&(m.className=u?"branah-recessed"+(this.caps?"":"-hover"):"");var g=document.getElementById("branah-escape");g&&(this.currentLayout===this.defaultLayout?g.className="branah-recessed":g.className="")}},t.keyboard.prototype.wireEvents=function(){var e=this;document.getElementById("branah-keyboard").onmousedown=function(n){var a=t.util.srcId(n,this,"button");a&&(e.interval=setInterval(function(){if(e.counter++,e.counter>5)switch(a){case"branah-backspace":case"branah-emoji-backspace":e.onBackspace();break;case"branah-enter":case"branah-emoji-enter":e.onEnter();break;case"branah-emoji-scrollup":e.onEmojiScrollUp();break;case"branah-emoji-scrolldown":e.onEmojiScrollDown();break;default:-1!=a.search("^branah-k([0-9]|[1-3][0-9]|4[0-7])$")?(e.onKey(a.substr(7)),e.shift=!1,e.alt=!1,e.ctrl=!1,e.altGr=!1,e.drawKeyboard()):-1!=a.search("^branah-k1[0-6][0-9]$")&&e.onEmojiKey(a.substr(8))}},50))},document.getElementById("branah-keyboard").onmouseup=function(t){e.stopRepeat()},document.getElementById("branah-keyboard").onmouseout=function(t){e.stopRepeat()},document.getElementById("branah-keyboard").onclick=function(n){var a=t.util.srcId(n,this,"button");if(a)switch(a){case"branah-left-shift":case"branah-right-shift":e.onShift();break;case"branah-left-alt":e.onCtrl(),e.onAlt();break;case"branah-right-alt":e.onAltGr();break;case"branah-left-ctrl":case"branah-right-ctrl":e.onAlt(),e.onCtrl();break;case"branah-escape":e.onEsc();break;case"branah-caps-lock":e.onCapsLock();break;case"branah-backspace":case"branah-emoji-backspace":e.onBackspace();break;case"branah-enter":case"branah-emoji-enter":e.onEnter();break;case"branah-space":e.onSpace();break;case"branah":case"branah-emoji":e.onEmoji();break;case"branah-emoji-scrollup":e.onEmojiScrollUp();break;case"branah-emoji-scrolldown":e.onEmojiScrollDown();break;default:-1!=a.search("^branah-k([0-9]|[1-3][0-9]|4[0-7])$")?(e.onKey(a.substr(7)),e.shift=!1,e.alt=!1,e.ctrl=!1,e.altGr=!1,e.drawKeyboard()):-1!=a.search("^branah-k1[0-6][0-9]$")&&e.onEmojiKey(a.substr(8))}},"ontouchstart"in document.documentElement&&t.util.mobile||(document.getElementById("branah-left-shift").onmouseover=function(t){e.shiftOn=!0,e.drawKeyboard()},document.getElementById("branah-right-shift").onmouseover=function(t){e.shiftOn=!0,e.drawKeyboard()},document.getElementById("branah-left-shift").onmouseout=function(t){e.shiftOn=!1,e.drawKeyboard()},document.getElementById("branah-right-shift").onmouseout=function(t){e.shiftOn=!1,e.drawKeyboard()},document.getElementById("branah-left-ctrl").onmouseover=function(t){e.altCtrlOn=!0,e.drawKeyboard()},document.getElementById("branah-right-ctrl").onmouseover=function(t){e.altCtrlOn=!0,e.drawKeyboard()},document.getElementById("branah-left-ctrl").onmouseout=function(t){e.altCtrlOn=!1,e.drawKeyboard()},document.getElementById("branah-right-ctrl").onmouseout=function(t){e.altCtrlOn=!1,e.drawKeyboard()},document.getElementById("branah-left-alt").onmouseover=function(t){e.altCtrlOn=!0,e.drawKeyboard()},document.getElementById("branah-right-alt").onmouseover=function(t){e.altGrOn=!0,e.drawKeyboard()},document.getElementById("branah-left-alt").onmouseout=function(t){e.altCtrlOn=!1,e.drawKeyboard()},document.getElementById("branah-right-alt").onmouseout=function(t){e.altGrOn=!1,e.drawKeyboard()},document.getElementById("branah-caps-lock").onmouseover=function(t){e.capsOn=!0,e.drawKeyboard()},document.getElementById("branah-caps-lock").onmouseout=function(t){e.capsOn=!1,e.drawKeyboard()}),e.textbox.onkeydown=function(n){var a=t.util.code(n);if("Unidentified"==a){var o=t.util.keyCode(n);a=t.layout.parser.keys[o+""]}if(("KeyA"!=a&&"KeyY"!=a&&"KeyZ"!=a&&"KeyC"!=a&&"KeyV"!=a&&"KeyX"!=a||!e.ctrl||e.alt||e.shift)&&(e.currentLayout!=e.defaultLayout||"Escape"==a))switch(a){case"ControlLeft":case"ControlRight":e.ctrl=!1,e.onCtrl();break;case"AltLeft":e.alt=!1,e.onAlt();break;case"AltRight":e.altGr=!1,e.onAltGr();break;case"ShiftLeft":case"ShiftRight":e.shift=!1,e.onShift();break;case"Escape":e.onEsc();break;case"CapsLock":n.getModifierState&&n.getModifierState("CapsLock")&&(e.caps=!1),e.onCapsLock();break;case"Backspace":e.onBackspace(),t.util.preventDefault(n);break;case"Space":e.onSpace(),t.util.preventDefault(n);break;case"Enter":e.onEnter(),t.util.preventDefault(n);break;default:var i=t.layout.parser.codes[a];null!=i&&(e.onKey("k"+i),e.drawKeyboard(),t.util.preventDefault(n),e.cancelkeypress=!0)}},t.util.opera&&(e.textbox.onkeypress=function(n){e.cancelkeypress&&(t.util.preventDefault(n),e.cancelkeypress=!1)}),e.textbox.onkeyup=function(n){var a=t.util.code(n);if("Unidentified"==a){var o=t.util.keyCode(n);a=t.layout.parser.keys[o+""]}switch(a){case"ControlLeft":case"ControlRight":e.ctrl=!0,e.onCtrl();break;case"AltLeft":e.alt=!0,e.onAlt();break;case"AltRight":e.altGr=!0,e.onAltGr();break;case"ShiftLeft":case"ShiftRight":e.shift=!0,e.onShift()}}};var e=!1;try{var n="item";localStorage.setItem(n,n),localStorage.removeItem(n),e=!0}catch(t){}var a=!1;try{"item"==(o=JSON.parse(JSON.stringify({item:"item"}))).item&&(a=!0)}catch(t){}-1!=document.cookie.indexOf("read=true")&&(document.getElementById("gdpr").style.display="none"),document.getElementById("gdpr-btn").onclick=function(){document.getElementById("gdpr").style.display="none",document.cookie="read=true"};var o,i=null,s={undo:[],redo:[],layout:null,fontSize:null},r="telugu",c=(i=new t.keyboard("keyboard","editor")).textbox;(c.focus(),e&&a)&&(null!=(o=JSON.parse(localStorage.getItem(r)))&&(o.layout&&(s.layout=o.layout),o.undo&&(s.undo=o.undo),o.redo&&(s.redo=o.redo),o.fontSize&&(s.fontSize=o.fontSize)));s.fontSize&&i.setFontSize(s.fontSize);var l=[{Id:"telugu",Name:"Telugu Keyboard",Json:{name:"Telugu",dir:"ltr",keys:[{i:"k0",c:"0",n:"ొ",s:"ఒ"},{i:"k1",c:"0",n:"1",t:"౧"},{i:"k2",c:"0",n:"2",t:"౨"},{i:"k3",c:"0",n:"3",t:"౩"},{i:"k4",c:"0",n:"4",t:"౪"},{i:"k5",c:"0",n:"5",t:"౫"},{i:"k6",c:"0",n:"6",t:"౬"},{i:"k7",c:"0",n:"7",t:"౭"},{i:"k8",c:"0",n:"8",t:"౮"},{i:"k9",c:"0",n:"9",s:"(",t:"౯"},{i:"k10",c:"0",n:"0",s:")",t:"౦"},{i:"k11",c:"0",n:"-",s:"ః"},{i:"k12",c:"0",n:"ృ",s:"ఋ",t:"ౄ"},{i:"k13",c:"0",n:"ౌ",s:"ఔ"},{i:"k14",c:"0",n:"ై",s:"ఐ",t:"ౖ"},{i:"k15",c:"0",n:"ా",s:"ఆ"},{i:"k16",c:"0",n:"ీ",s:"ఈ"},{i:"k17",c:"0",n:"ూ",s:"ఊ"},{i:"k18",c:"0",n:"బ",s:"భ"},{i:"k19",c:"0",n:"హ",s:"ఙ"},{i:"k20",c:"0",n:"గ",s:"ఘ"},{i:"k21",c:"0",n:"ద",s:"ధ"},{i:"k22",c:"0",n:"జ",s:"ఝ"},{i:"k23",c:"0",n:"డ",s:"ఢ"},{i:"k24",c:"0",s:"ఞ"},{i:"k25",c:"0",n:"ో",s:"ఓ"},{i:"k26",c:"0",n:"ో",s:"ఓ"},{i:"k27",c:"0",n:"ే",s:"ఏ",t:"ౕ"},{i:"k28",c:"0",n:"్",s:"అ"},{i:"k29",c:"0",n:"ి",s:"ఇ"},{i:"k30",c:"0",n:"ు",s:"ఉ"},{i:"k31",c:"0",n:"ప",s:"ఫ"},{i:"k32",c:"0",n:"ర",s:"ఱ"},{i:"k33",c:"0",n:"క",s:"ఖ"},{i:"k34",c:"0",n:"త",s:"థ"},{i:"k35",c:"0",n:"చ",s:"ఛ"},{i:"k36",c:"0",n:"ట",s:"ఠ"},{i:"k37",c:"0",n:"ె",s:"ఎ"},{i:"k38",c:"0",n:"ం",s:"ఁ"},{i:"k39",c:"0",n:"మ",s:"ణ"},{i:"k40",c:"0",n:"న",s:"న"},{i:"k41",c:"0",n:"వ",s:"‌"},{i:"k42",c:"0",n:"ల",s:"ళ"},{i:"k43",c:"0",n:"స",s:"శ"},{i:"k44",c:"0",n:",",s:"ష"},{i:"k45",c:"0",n:"."},{i:"k46",c:"0",n:"య"},{i:"k47",c:"0",n:"ో",s:"ఓ"}],deadkeys:[]}},{Id:"phonetic",Name:"Phonetic Keyboard",Json:{name:"Telugu Phonetic",dir:"ltr",keys:[{i:"k0",c:"0",n:"`",s:"~"},{i:"k1",c:"0",n:"౧",s:"!"},{i:"k2",c:"0",n:"౨",s:"@"},{i:"k3",c:"0",n:"౩",s:"#"},{i:"k4",c:"0",n:"౪",s:"$"},{i:"k5",c:"0",n:"౫",s:"%"},{i:"k6",c:"0",n:"౬",s:"^"},{i:"k7",c:"0",n:"౭",s:"&"},{i:"k8",c:"0",n:"౮",s:"*"},{i:"k9",c:"0",n:"౯",s:"("},{i:"k10",c:"0",n:"౦",s:")"},{i:"k11",c:"0",n:"-",s:"_"},{i:"k12",c:"0",n:"=",s:"+"},{i:"k13",c:"1",n:"q",s:"Q"},{i:"k14",c:"1",n:"వ",s:"W"},{i:"k15",c:"1",n:"ఎ",s:"ఏ"},{i:"k16",c:"1",n:"ర",s:"ఋ"},{i:"k17",c:"1",n:"త",s:"ట"},{i:"k18",c:"1",n:"య",s:"ఐ "},{i:"k19",c:"1",n:"ఉ",s:"ఊ"},{i:"k20",c:"1",n:"ఇ",s:"ఈ"},{i:"k21",c:"1",n:"ఒ",s:"ఓ"},{i:"k22",c:"1",n:"ప",s:"ఫ"},{i:"k23",c:"0",n:"[",s:"{"},{i:"k24",c:"0",n:"]",s:"}"},{i:"k25",c:"0",n:"\\",s:"|"},{i:"k26",c:"1",n:"అ",s:"ఆ"},{i:"k27",c:"1",n:"స",s:"శ"},{i:"k28",c:"1",n:"ద",s:"డ"},{i:"k29",c:"1",n:"ఫ",s:"F"},{i:"k30",c:"1",n:"గ",s:"ఘ"},{i:"k31",c:"1",n:"హ",s:"ః"},{i:"k32",c:"1",n:"జ",s:"ఝ"},{i:"k33",c:"1",n:"క",s:"ఖ"},{i:"k34",c:"1",n:"ల",s:"ళ"},{i:"k35",c:"0",n:";",s:":"},{i:"k36",c:"0",n:"'",s:'"'},{i:"k37",c:"1",n:"ఠ",s:"థ"},{i:"k38",c:"1",n:"ఁ",s:"X"},{i:"k39",c:"1",n:"చ",s:"ఛ"},{i:"k40",c:"1",n:"వ",s:"V"},{i:"k41",c:"1",n:"బ",s:"భ"},{i:"k42",c:"1",n:"న",s:"ణ"},{i:"k43",c:"1",n:"మ",s:"ం"},{i:"k44",c:"0",n:"।",s:"<"},{i:"k45",c:"0",n:"॥",s:">"},{i:"k46",c:"0",n:"/",s:"?"},{i:"k47",c:"0",n:"\\",s:"|"}],deadkeys:[]}}];if(1==l.length)i.loadVirtualLayout(l[0].Json);else{var u=[],d=[];s.layout||(s.layout=l[0].Id);for(var h=0;h<l.length;h++)u.push("<label",h>0?' style="margin-left:2em"':"",'><input id="',l[h].Id,'" name=type type=radio',s.layout==l[h].Id?' checked="checked"':"","> ",l[h].Name,"</label>"),d[h]=new t.layout,d[h].load(l[h].Json),s.layout==l[h].Id&&i.loadVirtualLayout(l[h].Json);var y=document.createElement("p");y.innerHTML=u.join(""),document.getElementById("keyboard").appendChild(y);for(h=0;h<l.length;h++)(function(t,n){document.getElementById(t).onclick=function(){s.layout!=t&&(i.virtualLayout=n,i.currentLayout=i.virtualLayout,i.reset(),i.drawKeyboard(),i.textbox.style.direction=n.dir,s.layout=t,e&&a&&localStorage.setItem(r,JSON.stringify(s))),i.textbox.focus()}})(l[h].Id,d[h])}t.util.indexOf=function(t,e){for(var n=t.length,a=0;a<n;a++)if(t[a]==e)return a;return-1},t.util.composeBrahmi=function(e,n,a,o){var i=o.length;if(0==i)return"";for(var s,r,c=o.charCodeAt(0),l=String.fromCharCode(c),u=1;u<i;++u)s=o.charCodeAt(u),r=t.util.indexOf(e,s),t.util.indexOf(a,c),-1!=t.util.indexOf(a,c)&&-1!=r&&(s=n[r]),39==c&&-1!=r&&(l=l.slice(0,l.length-1)),c=s,l+=String.fromCharCode(s);return l},i.customOnKey=function(e){if(t.util.insertAtCaret(this.textbox,e),"phonetic"==s.layout){var n=t.util.deleteAtCaret(this.textbox,2,0);t.util.insertAtCaret(this.textbox,b.compose(n))}return!0};var b={vowel:[3078,3079,3080,3081,3082,3083,3086,3087,3088,3090,3091,3092],modifier:[3134,3135,3136,3137,3138,3139,3142,3143,3144,3146,3147,3148],consonant:[3093,3094,3095,3096,3097,3098,3099,3100,3101,3102,3103,3104,3105,3106,3107,3108,3109,3110,3111,3112,3114,3115,3116,3117,3118,3119,3120,3121,3122,3123,3125,3126,3127,3128,3129,3133],compose:function(e){return t.util.composeBrahmi(this.vowel,this.modifier,this.consonant,e)}};null==s.fontSize&&(s.fontSize=i.getFontSize(),e&&a&&localStorage.setItem(r,JSON.stringify(s))),document.getElementById("shrink").onclick=function(){s.fontSize<14||(s.fontSize-=2,i.setFontSize(s.fontSize),i.drawKeyboard(),e&&a&&localStorage.setItem(r,JSON.stringify(s)),c.focus())},document.getElementById("enlarge").onclick=function(){s.fontSize>36||(s.fontSize+=2,i.setFontSize(s.fontSize),i.drawKeyboard(),e&&a&&localStorage.setItem(r,JSON.stringify(s)),c.focus())},document.getElementById("email").onclick=function(){return this.href="mailto: ?body="+c.value,c.focus(),!0},document.getElementById("selectAll").onclick=function(){t.util.setCaretPosition(c,0,c.value.length),ga("send","event","Keyboard","click","Select"),c.focus()},document.getElementById("copy").onclick=function(){t.util.setCaretPosition(c,0,c.value.length),document.execCommand("copy")?(t.util.setCaretPosition(c,c.value.length,c.value.length),ga("send","event","Keyboard","click","Copy")):(alert("Your browser does not allow automated copy. To copy the text in the text area, you can click Select All button and right click on the selected text. Then click the Copy option."),ga("send","event","Keyboard","click","Copy Fail")),c.focus()},e&&a?(s.undo.length>0&&(c.value=s.undo.pop()),document.getElementById("clearAll").onclick=function(){(c.value.length<10||confirm("Are you sure you want to clear all the text?"))&&(ga("send","event","Keyboard","click","Clear"),s.undo=[],s.redo=[],localStorage.setItem(r,JSON.stringify(s)),c.value=""),c.focus()},document.getElementById("undo").onclick=function(){if(0!=s.undo.length){var t=s.undo.pop();t!=c.value?(s.redo.push(c.value),c.value=t):(c.value=0==s.undo.length?"":s.undo[s.undo.length-1],s.redo.push(t)),localStorage.setItem(r,JSON.stringify(s)),c.focus()}},document.getElementById("redo").onclick=function(){if(0!=s.redo.length){var t=s.redo.pop();c.value=t,s.undo.push(t),localStorage.setItem(r,JSON.stringify(s)),c.focus()}},setInterval(function(){var t=c.value;0==s.undo.length&&0==t.length||0!=s.undo.length&&t==s.undo[s.undo.length-1]||(s.undo.push(t),localStorage.setItem(r,JSON.stringify(s)))},3e3)):(document.getElementById("undo").style.display="none",document.getElementById("redo").style.display="none",document.getElementById("clearAll").style.display="none"),document.getElementById("postToTwitter").onclick=function(){return ga("send","event","Keyboard","click","Twitter"),document.getElementById("postToTwitter").href="https://twitter.com/intent/tweet?text="+encodeURIComponent(c.value),c.focus(),!0},document.getElementById("searchGoogle").onclick=function(){return ga("send","event","Keyboard","click","Google"),document.getElementById("searchGoogle").href="https://www.google.com/search?ie=UTF-8&q="+encodeURIComponent(c.value),c.focus(),!0},document.getElementById("translateGoogle").onclick=function(){return ga("send","event","Keyboard","click","Translate"),document.getElementById("translateGoogle").href="https://translate.google.com/#view=home&op=translate&sl=te&tl=en&text="+encodeURIComponent(c.value),c.focus(),!0},document.getElementById("saveAsTextFile").onsubmit=function(){return ga("send","Keyboard","Save","send",c.value.length>0?"valid":"invalid"),document.getElementById("data").value=c.value,c.focus(),!0}}();